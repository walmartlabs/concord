configuration:
  runtime: "concord-v2"

flows:
  default:
    # create a new API key
    - task: concord
      in:
        action: createOrUpdateApiKey
        username: ${apiKeyUsername}
      out: result1
    - log: "result1=${result1}"

    # update the API key
    - task: concord
      in:
        action: createOrUpdateApiKey
        username: ${apiKeyUsername}
        name: ${result1.name}
      out: result2
    - log: "result2=${result2}"

    # update the key again, now using the predefined value
    - task: concord
      in:
        action: createOrUpdateApiKey
        username: ${apiKeyUsername}
        name: ${result1.name}
        key: ${apiKeyValue}
      out: result3
    - log: "result3=${result3}"
