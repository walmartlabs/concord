configuration:
  runtime: "concord-v2"
  dependencies:
  - "mvn://com.walmartlabs.concord.plugins.basic:ansible-tasks:2.36.0"

flows:
  default:
  - task: ansible
    in:
      playbook: "playbook/hello.yml"
      inventory:
        local:
          hosts:
            - "127.0.0.1"
          vars:
            ansible_connection: "local"
      outVars:
      - "myVar" # created using the `register` statement in the playbook
    out: ansibleResult

  # `myVar` contains the variable values for all hosts in the play
  - log: "${ansibleResult.myVar['127.0.0.1']['msg']}"
